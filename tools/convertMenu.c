/*
    Convert Text input to mario 2 custom ascii file
    Producks 2025-02-23
*/

#include <unistd.h>
#include <stdio.h>
#include <string.h>

const static char magic_table[] = { 
    0x00, // Padding
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x6E, // Space 
    0x40, // !
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x00,
    0x0E, // ,
    0x00,
    0x1E, // .
    0x00, //
    0x02, // 0
    0x03, // 1
    0x04, // 2
    0x05, // 3
    0x06, // 4
    0x07, // 5
    0x08, // 6
    0x09, // 7
    0x0A, // 8
    0x0B, // 9
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, 
    0x41, // ?
    0x00,
    0x0C, // A
    0x1A, // B
    0x0E, // C
    0x1B, // D
    0x10, // E
    0x11, // F
    0x1D, // G
    0x13, // H
    0x14, // I
    0x15, // J
    0x16, // K
    0x17, // L missed the L RIP
    0x18, // M
    0x0D, // N
    0x0B, // O
    0x0A, // P
    0x1C, // Q
    0x1D, // R
    0x1C, // S
    0x1F, // T
    0x20, // U
    0x21, // V
    0x22, // W
    0x23, // X
    0x24, // Y
    0x25, // Z
    0x00, 
    0x00,
    0x00,
    0x00,
    0x00,
    0x00, 
    0x00, // a
    0x27, // b
    0x10, // c
    0x11, // d
    0x01, // e
    0x2B, // f
    0x02, // g
    0x12, // h
    0x03, // i
    0x2F, // j
    0x13, // k
    0x04, // l
    0x14, // m
    0x05, // n
    0x15, // o
    0x06, // p
    0x36, // q
    0x16, // r
    0x07, // s
    0x17, // t
    0x08, // u
    0x18, // v
    0x09, // w
    0x3D, // x
    0x19, // y
    0x3F, // z
};

int main(int argc, char **argv) {
  if (argc != 2) {
    printf("No argument were provided\n");
    return 1;
  }
  unsigned int length = strlen(argv[1]);
  printf(".db");
  for (int index = 0; index < 22; index++) {
    if (index < length)
      printf(" $%02X", magic_table[argv[1][index]]);
    else
      printf(" $6E");
    if (index != 21)
      printf(",");
  }
  printf("\n");
  return 0;
}
